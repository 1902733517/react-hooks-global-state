var t=require("react");function e(){return(e=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}var n=function(t,e){return"function"==typeof e?e(t):e},r=function(t,e){if(!t.includes(e))throw new Error("'"+e+"' not found. It must be provided in initialState as a property key.")};function u(u,o){var a=Object.keys(u),c=u,i=function(){var t=new Map;return a.forEach(function(e){t.set(e,new Set)}),t.set(null,new Set),t}(),f=function(t,e){a.forEach(function(n){t[n]!==e[n]&&i.get(n).forEach(function(t){t()})}),i.get(null).forEach(function(t){t()})},s={getState:function(){return c},setState:function(t){var e=c;c=n(e,t),f(e,c)},getStateByKey:function(t){return"production"!==process.env.NODE_ENV&&r(a,t),c[t]},setStateByKey:function(t,u){var o,f;"production"!==process.env.NODE_ENV&&r(a,t),c=e(e({},o=c),{},((f={})[t]=n(o[t],u),f)),i.get(t).forEach(function(t){t()}),i.get(null).forEach(function(t){t()})},dispatch:function(t){if(!o)throw new Error("no reducer specified");var e=c;return c=o(e,t),f(e,c),t},subscribe:function(t,e){var n=i.get(t);return n.add(e),function(){n.delete(e)}},mutableSource:void 0};return s.mutableSource=t.createMutableSource(s,function(){return c}),s}function o(e,n){var r=t.useCallback(function(t){return n?t.getStateByKey(n):t.getState()},[n]),u=t.useCallback(function(t,e){return t.subscribe(n||null,e)},[n]);return[t.useMutableSource(e.mutableSource,r,u),t.useCallback(function(t){n?e.setStateByKey(n,t):e.setState(t)},[e,n])]}exports.createAtom=u,exports.createGlobalState=function(t){var e=u(t);return{useGlobalState:function(t){return o(e,t)},getGlobalState:e.getStateByKey,setGlobalState:e.setStateByKey}},exports.createStore=function t(e,n,r){if(void 0===n&&(n=e(void 0,{type:void 0})),r)return r(t)(e,n);var a=u(n,e);return{useGlobalState:function(t){return o(a,t)},getState:a.getState,setState:a.setState,dispatch:a.dispatch}},exports.reduxDevToolsExt=function(){return window.__REDUX_DEVTOOLS_EXTENSION__?function(){return[].slice.call(arguments).reduce(function(t,e){return function(){return t(e.apply(void 0,[].slice.call(arguments)))}})}(function(r){return function(u,o,a){if(t=u,n=o,a)return a(r)(u,o);var c=r(u,o);return e(e({},c),{},{useGlobalState:function(t){return[c.useGlobalState(t)[0],function(){throw new Error("Update is not allowed when using DevTools")}]}})}},window.__REDUX_DEVTOOLS_EXTENSION__(),function(r){return function(u,o,a){if(a)return a(r)(u,o);var c=r(t,n),i=e(e({},u(o,{type:"@@redux/INIT"})),n),f=[];return e(e({},c),{},{getState:function(){return i},dispatch:function(t){return i=u(i,t),c.setState(i.computedStates[i.currentStateIndex].state),f.forEach(function(t){return t()}),t},subscribe:function(t){return f.push(t),function(){var e=f.indexOf(t);f.splice(e,1)}}})}}):function(t){return t};var t,n},exports.useAtom=o;
//# sourceMappingURL=index.js.map
